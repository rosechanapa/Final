{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport classNames from 'classnames';\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport * as React from 'react';\nimport { usePanelContext } from \"../../context\";\nimport useScrollTo from \"./useScrollTo\";\nvar SCROLL_DELAY = 300;\nexport default function TimeColumn(props) {\n  var units = props.units,\n    value = props.value,\n    optionalValue = props.optionalValue,\n    type = props.type,\n    onChange = props.onChange,\n    onHover = props.onHover,\n    onDblClick = props.onDblClick,\n    changeOnScroll = props.changeOnScroll;\n  var _usePanelContext = usePanelContext(),\n    prefixCls = _usePanelContext.prefixCls,\n    cellRender = _usePanelContext.cellRender,\n    now = _usePanelContext.now,\n    locale = _usePanelContext.locale;\n  var panelPrefixCls = \"\".concat(prefixCls, \"-time-panel\");\n  var cellPrefixCls = \"\".concat(prefixCls, \"-time-panel-cell\");\n\n  // ========================== Refs ==========================\n  var ulRef = React.useRef(null);\n\n  // ========================= Scroll =========================\n  var checkDelayRef = React.useRef();\n  var clearDelayCheck = function clearDelayCheck() {\n    clearTimeout(checkDelayRef.current);\n  };\n\n  // ========================== Sync ==========================\n  var _useScrollTo = useScrollTo(ulRef, value !== null && value !== void 0 ? value : optionalValue),\n    _useScrollTo2 = _slicedToArray(_useScrollTo, 3),\n    syncScroll = _useScrollTo2[0],\n    stopScroll = _useScrollTo2[1],\n    isScrolling = _useScrollTo2[2];\n\n  // Effect sync value scroll\n  useLayoutEffect(function () {\n    syncScroll();\n    clearDelayCheck();\n    return function () {\n      stopScroll();\n      clearDelayCheck();\n    };\n  }, [value, optionalValue, units]);\n\n  // ========================= Change =========================\n  // Scroll event if sync onScroll\n  var onInternalScroll = function onInternalScroll(event) {\n    clearDelayCheck();\n    var target = event.target;\n    if (!isScrolling() && changeOnScroll) {\n      checkDelayRef.current = setTimeout(function () {\n        var ul = ulRef.current;\n        var firstLiTop = ul.querySelector(\"li\").offsetTop;\n        var liList = Array.from(ul.querySelectorAll(\"li\"));\n        var liTopList = liList.map(function (li) {\n          return li.offsetTop - firstLiTop;\n        });\n        var liDistList = liTopList.map(function (top, index) {\n          if (units[index].disabled) {\n            return Number.MAX_SAFE_INTEGER;\n          }\n          return Math.abs(top - target.scrollTop);\n        });\n\n        // Find min distance index\n        var minDist = Math.min.apply(Math, _toConsumableArray(liDistList));\n        var minDistIndex = liDistList.findIndex(function (dist) {\n          return dist === minDist;\n        });\n        var targetUnit = units[minDistIndex];\n        if (targetUnit && !targetUnit.disabled) {\n          onChange(targetUnit.value);\n        }\n      }, SCROLL_DELAY);\n    }\n  };\n\n  // ========================= Render =========================\n  var columnPrefixCls = \"\".concat(panelPrefixCls, \"-column\");\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    className: columnPrefixCls,\n    ref: ulRef,\n    \"data-type\": type,\n    onScroll: onInternalScroll\n  }, units.map(function (_ref) {\n    var label = _ref.label,\n      unitValue = _ref.value,\n      disabled = _ref.disabled;\n    var inner = /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(cellPrefixCls, \"-inner\")\n    }, label);\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: unitValue,\n      className: classNames(cellPrefixCls, _defineProperty(_defineProperty({}, \"\".concat(cellPrefixCls, \"-selected\"), value === unitValue), \"\".concat(cellPrefixCls, \"-disabled\"), disabled)),\n      onClick: function onClick() {\n        if (!disabled) {\n          onChange(unitValue);\n        }\n      },\n      onDoubleClick: function onDoubleClick() {\n        if (!disabled && onDblClick) {\n          onDblClick();\n        }\n      },\n      onMouseEnter: function onMouseEnter() {\n        onHover(unitValue);\n      },\n      onMouseLeave: function onMouseLeave() {\n        onHover(null);\n      },\n      \"data-value\": unitValue\n    }, cellRender ? cellRender(unitValue, {\n      prefixCls: prefixCls,\n      originNode: inner,\n      today: now,\n      type: 'time',\n      subType: type,\n      locale: locale\n    }) : inner);\n  }));\n}","map":{"version":3,"names":["_defineProperty","_toConsumableArray","_slicedToArray","classNames","useLayoutEffect","React","usePanelContext","useScrollTo","SCROLL_DELAY","TimeColumn","props","units","value","optionalValue","type","onChange","onHover","onDblClick","changeOnScroll","_usePanelContext","prefixCls","cellRender","now","locale","panelPrefixCls","concat","cellPrefixCls","ulRef","useRef","checkDelayRef","clearDelayCheck","clearTimeout","current","_useScrollTo","_useScrollTo2","syncScroll","stopScroll","isScrolling","onInternalScroll","event","target","setTimeout","ul","firstLiTop","querySelector","offsetTop","liList","Array","from","querySelectorAll","liTopList","map","li","liDistList","top","index","disabled","Number","MAX_SAFE_INTEGER","Math","abs","scrollTop","minDist","min","apply","minDistIndex","findIndex","dist","targetUnit","columnPrefixCls","createElement","className","ref","onScroll","_ref","label","unitValue","inner","key","onClick","onDoubleClick","onMouseEnter","onMouseLeave","originNode","today","subType"],"sources":["D:/Final/frontend/node_modules/rc-picker/es/PickerPanel/TimePanel/TimePanelBody/TimeColumn.js"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\r\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\r\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\r\nimport classNames from 'classnames';\r\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\r\nimport * as React from 'react';\r\nimport { usePanelContext } from \"../../context\";\r\nimport useScrollTo from \"./useScrollTo\";\r\nvar SCROLL_DELAY = 300;\r\nexport default function TimeColumn(props) {\r\n  var units = props.units,\r\n    value = props.value,\r\n    optionalValue = props.optionalValue,\r\n    type = props.type,\r\n    onChange = props.onChange,\r\n    onHover = props.onHover,\r\n    onDblClick = props.onDblClick,\r\n    changeOnScroll = props.changeOnScroll;\r\n  var _usePanelContext = usePanelContext(),\r\n    prefixCls = _usePanelContext.prefixCls,\r\n    cellRender = _usePanelContext.cellRender,\r\n    now = _usePanelContext.now,\r\n    locale = _usePanelContext.locale;\r\n  var panelPrefixCls = \"\".concat(prefixCls, \"-time-panel\");\r\n  var cellPrefixCls = \"\".concat(prefixCls, \"-time-panel-cell\");\r\n\r\n  // ========================== Refs ==========================\r\n  var ulRef = React.useRef(null);\r\n\r\n  // ========================= Scroll =========================\r\n  var checkDelayRef = React.useRef();\r\n  var clearDelayCheck = function clearDelayCheck() {\r\n    clearTimeout(checkDelayRef.current);\r\n  };\r\n\r\n  // ========================== Sync ==========================\r\n  var _useScrollTo = useScrollTo(ulRef, value !== null && value !== void 0 ? value : optionalValue),\r\n    _useScrollTo2 = _slicedToArray(_useScrollTo, 3),\r\n    syncScroll = _useScrollTo2[0],\r\n    stopScroll = _useScrollTo2[1],\r\n    isScrolling = _useScrollTo2[2];\r\n\r\n  // Effect sync value scroll\r\n  useLayoutEffect(function () {\r\n    syncScroll();\r\n    clearDelayCheck();\r\n    return function () {\r\n      stopScroll();\r\n      clearDelayCheck();\r\n    };\r\n  }, [value, optionalValue, units]);\r\n\r\n  // ========================= Change =========================\r\n  // Scroll event if sync onScroll\r\n  var onInternalScroll = function onInternalScroll(event) {\r\n    clearDelayCheck();\r\n    var target = event.target;\r\n    if (!isScrolling() && changeOnScroll) {\r\n      checkDelayRef.current = setTimeout(function () {\r\n        var ul = ulRef.current;\r\n        var firstLiTop = ul.querySelector(\"li\").offsetTop;\r\n        var liList = Array.from(ul.querySelectorAll(\"li\"));\r\n        var liTopList = liList.map(function (li) {\r\n          return li.offsetTop - firstLiTop;\r\n        });\r\n        var liDistList = liTopList.map(function (top, index) {\r\n          if (units[index].disabled) {\r\n            return Number.MAX_SAFE_INTEGER;\r\n          }\r\n          return Math.abs(top - target.scrollTop);\r\n        });\r\n\r\n        // Find min distance index\r\n        var minDist = Math.min.apply(Math, _toConsumableArray(liDistList));\r\n        var minDistIndex = liDistList.findIndex(function (dist) {\r\n          return dist === minDist;\r\n        });\r\n        var targetUnit = units[minDistIndex];\r\n        if (targetUnit && !targetUnit.disabled) {\r\n          onChange(targetUnit.value);\r\n        }\r\n      }, SCROLL_DELAY);\r\n    }\r\n  };\r\n\r\n  // ========================= Render =========================\r\n  var columnPrefixCls = \"\".concat(panelPrefixCls, \"-column\");\r\n  return /*#__PURE__*/React.createElement(\"ul\", {\r\n    className: columnPrefixCls,\r\n    ref: ulRef,\r\n    \"data-type\": type,\r\n    onScroll: onInternalScroll\r\n  }, units.map(function (_ref) {\r\n    var label = _ref.label,\r\n      unitValue = _ref.value,\r\n      disabled = _ref.disabled;\r\n    var inner = /*#__PURE__*/React.createElement(\"div\", {\r\n      className: \"\".concat(cellPrefixCls, \"-inner\")\r\n    }, label);\r\n    return /*#__PURE__*/React.createElement(\"li\", {\r\n      key: unitValue,\r\n      className: classNames(cellPrefixCls, _defineProperty(_defineProperty({}, \"\".concat(cellPrefixCls, \"-selected\"), value === unitValue), \"\".concat(cellPrefixCls, \"-disabled\"), disabled)),\r\n      onClick: function onClick() {\r\n        if (!disabled) {\r\n          onChange(unitValue);\r\n        }\r\n      },\r\n      onDoubleClick: function onDoubleClick() {\r\n        if (!disabled && onDblClick) {\r\n          onDblClick();\r\n        }\r\n      },\r\n      onMouseEnter: function onMouseEnter() {\r\n        onHover(unitValue);\r\n      },\r\n      onMouseLeave: function onMouseLeave() {\r\n        onHover(null);\r\n      },\r\n      \"data-value\": unitValue\r\n    }, cellRender ? cellRender(unitValue, {\r\n      prefixCls: prefixCls,\r\n      originNode: inner,\r\n      today: now,\r\n      type: 'time',\r\n      subType: type,\r\n      locale: locale\r\n    }) : inner);\r\n  }));\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}